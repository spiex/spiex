<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tabelka LM 2019/2020</title>
    <link rel="stylesheet" href="./scss/style.min.css">
  </head>
  <body>
    <div class="wrapper">
      <header>
        <nav>
          <ul>
            <li><a href="#" class="selected">TABELKA</a></li>
            <li><a href="spiex.html">typowanie</a></li>
            <li><a href="wyniki.html">wyniki</a></li>
            <li><a href="punktacja.html">punktacja</a></li>
          </ul>
        </nav>
      </header>

      <div class="jumbo">
        <div class="foto-box">
          <img src="https://www.thesportsdb.com/images/media/league/badge/dtp1dl1534767233.png">
        </div>
        <div class="title-box">
          <div>
            <h1>Tabelka LM</h1>
            <p>sezon 2019/2020</p>
          </div>
        </div>
      </div>

      <div class="button-box-wide" id="tabelka-toggles">
        <input type="radio" name="tabela" value="0" id="tabela-1" checked>
        <label for="tabela-1" id="toggle-tabelka">WYKRES</label>
        <input type="radio" name="tabela" value="1" id="tabela-2">
        <label for="tabela-2" id="toggle-wykres">TABELKA</label>
      </div>

      <div id="statystyka">

        <div class="pojemnik-wykres" id="pojemnik-wykres"></div>
        <div class="new-table" id="pojemnik-tabelka"></div>

        <div class="progress-bar">
          <div class="progress-slider" id="pozostale-mecze"></div>
        </div>

      </div>

      <div class="pojemnik-wyniki">
        <div class="matches" id="current-matches-box">
          <!-- <div class="match-box">
            <p class="druzyna">TOTTENHAM HOTSPUR</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>4</p>
                <p>:</p>
                <p>1</p>
              </div>
              <p class="czas">90'+5</p>
            </div>
            <p class="druzyna handicap1">SCHALKE 04 GESELKIRCHEN</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-wynik">
              <div><p>hetman ★★</p></div>
              <div>
                <p>4</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+18.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>śpiex ★</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+11.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>śliw ★★</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+5.5</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>mareczek</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>2</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>mati</p></div>
              <div class="typy-wynik">
                <p>1</p>
                <p>:</p>
                <p>2</p>
              </div>
              <div>
                <p>+0.0</p>
                <p>x2</p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">REAL MADRID</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>0</p>
                <p>:</p>
                <p>0</p>
              </div>
              <p class="czas">56'</p>
            </div>
            <p class="druzyna">BORUSSIA DORTMUND</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>śpiexinho</p></div>
              <div>
                <p>2</p>
                <p>:</p>
                <p>2</p>
              </div>
              <div>
                <p>+12.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>śpiex</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+8.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>mareczek</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+8.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>1</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+6.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+0.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna handicap2">LEGIA WARSZAWA</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>2</p>
                <p>:</p>
                <p>3</p>
              </div>
              <p class="czas">FT</p>
            </div>
            <p class="druzyna">JUVENTUS</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>1</p>
                <p>:</p>
                <p>2</p>
              </div>
              <div>
                <p>+10.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>śliw</p></div>
              <div>
                <p>2</p>
                <p>:</p>
                <p>3</p>
              </div>
              <div>
                <p>+9.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>3</p>
              </div>
              <div>
                <p>+6.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>śpiex</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>4</p>
              </div>
              <div>
                <p>+6.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>mareczek</p></div>
              <div class="typy-wynik">
                <p>1</p>
                <p>:</p>
                <p>4</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-rezultat">
              <div><p>śpiexinho</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>2</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>mati</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+0.0</p>
                <p>x2</p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">MANCHESTER UNITED</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>0</p>
                <p>:</p>
                <p>2</p>
              </div>
              <p class="czas">FT</p>
            </div>
            <p class="druzyna">FC BARCELONA</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row">
              <div><p>hetman</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śpiex</p></div>
              <div>
                <p>1</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+0.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>mati</p></div>
              <div class="typy-wynik">
                <p>0</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+0.0</p>
                <p>x2</p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">INTER MILAN</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>-</p>
                <p>:</p>
                <p>-</p>
              </div>
              <p class="czas">14/06</p>
            </div>
            <p class="druzyna handicap2">PSV EINDHOVEN</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+12.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śpiex</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+5.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">FC Napoli</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>-</p>
                <p>:</p>
                <p>-</p>
              </div>
              <p class="czas">14/06</p>
            </div>
            <p class="druzyna">Ajax</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+12.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śpiex</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+5.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">Liverpool FC</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>-</p>
                <p>:</p>
                <p>-</p>
              </div>
              <p class="czas">15/06</p>
            </div>
            <p class="druzyna">Manchester City</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+12.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śpiex</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+5.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
          </div>
          <div class="match-box">
            <p class="druzyna">Paris Saint-Germain</p>
            <div class="wynik-czas">
              <div class="wynik">
                <p>-</p>
                <p>:</p>
                <p>-</p>
              </div>
              <p class="czas">15/06</p>
            </div>
            <p class="druzyna">CHELSEA LONDON</p>
            <div class="overlay hidden"></div>
          </div>
          <div class="hidden-content">
            <div class="hidden-row trafiony-rezultat">
              <div><p>hetman</p></div>
              <div>
                <p>3</p>
                <p>:</p>
                <p>0</p>
              </div>
              <div>
                <p>+12.0</p>
                <p>x2</p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śpiex</p></div>
              <div>
                <p>0</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row">
              <div><p>śliw</p></div>
              <div class="typy-wynik">
                <p>3</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+5.0</p>
                <p></p>
              </div>
            </div>
            <div class="hidden-row trafiony-wynik">
              <div><p>trybul</p></div>
              <div class="typy-wynik">
                <p>2</p>
                <p>:</p>
                <p>1</p>
              </div>
              <div>
                <p>+3.0</p>
                <p></p>
              </div>
            </div>
          </div> -->
        </div>
      </div> <!-- koniec pojemnika wyniki -->
    </div> <!-- end of wrapper -->
    <footer>
      <p>copyright by śpiex, <script>document.write(new Date().getFullYear())</script></p>
      <p>marcin.spiewakowski@gmail.com</p>
    </footer>

    <script>
       function makeApiCall() {
         var params = {
           spreadsheetId: '1cK-0glAn4xyDOE1CQLhzy0Mx_8l0wFH-KW06rTKLg_E',
           range: "playersstats",
         };

        // custom functions
        function print(message, location) {
          let div = document.querySelector(location);
          div.innerHTML = message;
        }

        function createWykres(array) {

          let wykres = [];
          let tabelka = [];

          tabelka += `
            <div class="new-row">
              <p></p>
              <p></p>
              <p class="small">pkt</p>
              <p></p>
              <p>1x2</p>
              <p></p>
              <p>x2</p>
            </div>
          `

          for (i=1; i < array.length; i++) {
            wykres += `
              <div class="box-wykres">
                <div class="change">${array[i][13]-array[i][12] > "0" ? "▲" : array[i][13]-array[i][12] < "0" ? "▼" : ""}</div>
                <div class="box-name">${array[i][1]} ${array[i][2]}</div>
                <div class="wykres">
                  <div class="punkty-stare + ${array[i][5] === "0.0" ? "round" : ""}" style="width: ${array[i][14]};"><p>${array[i][3]}</p><span>+${array[i][5]}</span></div>
                  <div class="punkty-nowe" style="width: ${array[i][15]};"></div>
                </div>
              </div>
            `
            tabelka += `
              <div class="new-row">
                <p>${[i]}</p>
                <p>${array[i][1]} ${array[i][2]}</p>
                <p>${array[i][3]}</p>
                <p>|</p>
                <p>${array[i][8]}</p>
                <p>|</p>
                <p>${array[i][11]}</p>
              </div>
            `
          }

          print(wykres,"#pojemnik-wykres");
          print(tabelka,"#pojemnik-tabelka");
        }

        var request = gapi.client.sheets.spreadsheets.values.get(params);
          request.then(function(response) {
            console.log(response.result);
            createWykres(response.result.values);
          }, function(reason) {
            console.error('error: ' + reason.result.error.message);
          });
       } // end of makeApiCall


       function initClient() {
         var API_KEY = 'AIzaSyDteHMNEiCdA0XHbEPUM3plvjQzRw-rVVU';
         var CLIENT_ID = '896208609852-0d4hqobmliea0uq34uoho0lekhs2tch4.apps.googleusercontent.com';
         var SCOPE = 'https://www.googleapis.com/auth/spreadsheets.readonly';

         gapi.client.init({
           'apiKey': API_KEY,
           'clientId': CLIENT_ID,
           'scope': SCOPE,
           'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
         }).then(function() {
           gapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus);
           updateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
         });
       }

       function handleClientLoad() {gapi.load('client:auth2', initClient);}
       function updateSignInStatus(isSignedIn) {
           makeApiCall();
       }
     </script>
     <script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>

     <script>
        function makeApiCall2() {
          var params = {
            spreadsheetId: '1cK-0glAn4xyDOE1CQLhzy0Mx_8l0wFH-KW06rTKLg_E',
            range: "schedule",
          };

         // custom functions
         function print(message, location) {
           let div = document.querySelector(location);
           div.innerHTML = message;
         }

         function printPoints(array) {
           let wyniki = [];

           for (i=1; i < array.length; i++) {
             // console.log(array[i][0]);
             if (array[i][1] === array[0][1]) { // 8 - print only matches that ended, 4 - incoming matches
               wyniki +=
               `<div class="match-box">
                 <p class="druzyna + ${array[i][6] === "A1" ? "handicap1" : array[i][6] === "A2" ? "handicap2" : ""}">${array[i][4]}</p>
                 <div class="wynik-czas">
                   <div class="wynik">
                     <p>${array[i][7]}</p>
                     <p>:</p>
                     <p>${array[i][8]}</p>
                   </div>
                   <p class="czas">${array[i][3]}</p>
                 </div>
                 <p class="druzyna + ${array[i][6] === "B1" ? "handicap1" : array[i][6] === "B2" ? "handicap2" : ""}">${array[i][5]}</p>
                 <div class="overlay hidden"></div>
               </div>`;

               // add hidden content, TODO: run on click only to make the code run more smoothly
               wyniki += `<div class="hidden-content">`

               for (h=12; h < array[i].length; h+=6) {

                   wyniki += `
                     <div class="hidden-row + ${array[i][h+3] === "wynik" ? "trafiony-wynik" : array[i][h+3] === "rezultat" ? "trafiony-rezultat" : ""}">
                       <div><p>${array[i][h+5]}</p></div>
                       <div>
                         <p>${array[i][h]}</p>
                         <p>:</p>
                         <p>${array[i][h+1]}</p>
                       </div>
                       <div>
                         <p>+${array[i][h+2]}</p>
                         <p>${array[i][h+4] === "TRUE" ? "x2" : ""}</p>
                       </div>
                     </div>
                   `
               }

               wyniki += `</div>`; // end of hidden content
             } else {
               break; // break loop when no more matches with criteria from line 61
             }
           }
           print(wyniki,"#current-matches-box");
         }

         var request = gapi.client.sheets.spreadsheets.values.get(params);
           request.then(function(response) {
             console.log(response.result);
             printPoints(response.result.values);
           }, function(reason) {
             console.error('error: ' + reason.result.error.message);
           });
        }


        function initClient() {
          var API_KEY = 'AIzaSyDteHMNEiCdA0XHbEPUM3plvjQzRw-rVVU';
          var CLIENT_ID = '896208609852-0d4hqobmliea0uq34uoho0lekhs2tch4.apps.googleusercontent.com';
          var SCOPE = 'https://www.googleapis.com/auth/spreadsheets.readonly';

          gapi.client.init({
            'apiKey': API_KEY,
            'clientId': CLIENT_ID,
            'scope': SCOPE,
            'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
          }).then(function() {
            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus);
            updateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
          });
        }

        function handleClientLoad() {gapi.load('client:auth2', initClient);}
        function updateSignInStatus(isSignedIn) {
            makeApiCall2();
        }
      </script>
      <script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>


  <script src="script/main.js"></script>


  </body>
</html>
