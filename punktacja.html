<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tabelka LM 2019/2020</title>
    <link rel="stylesheet" href="./scss/style.min.css">
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="index.html">TABELKA</a></li>
          <li><a href="spiex.html">typowanie</a></li>
          <li><a href="#">wyniki</a></li>
          <li><a href="#" class="selected">punktacja</a></li>
        </ul>
      </nav>
    </header>

    <div class="jumbo">
      <div class="foto-box">
        <img src="https://www.thesportsdb.com/images/media/league/badge/dtp1dl1534767233.png">
      </div>
      <div class="title-box">
        <div>
          <h1>Tabelka LM</h1>
          <p>punktacja</p>
        </div>
      </div>
    </div>

    <div class="pojemnik-punktacja">
      <div class="button-box-wide">
        <button class="btn-secondary active" id="punktacja-1">NORMALNA</button>
        <button class="btn-secondary" id="punktacja-2">HANDICAP 1</button>
        <button class="btn-secondary" id="punktacja-3">HANDICAP 2</button>
      </div>

      <div class="punktacja-legenda">
        <p>wynik</p>
        <div>
          <p>1x2</p>
          <p>różnica</p>
          <p>dokładny</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">0 - 0</p>
        <div>
          <p>6</p>
          <p>6</p>
          <p>8</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">1 - 0</p>
        <div>
          <p>3</p>
          <p>5</p>
          <p>7</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">1 - 1</p>
        <div>
          <p>6</p>
          <p>6</p>
          <p>8</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">2 - 0</p>
        <div>
          <p>3</p>
          <p>5.5</p>
          <p>7.5</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">2 - 1</p>
        <div>
          <p>3</p>
          <p>5</p>
          <p>7</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">2 - 2</p>
        <div>
          <p>6</p>
          <p>6</p>
          <p>9</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">3 - 0</p>
        <div>
          <p>3</p>
          <p>6</p>
          <p>8</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">3 - 1</p>
        <div>
          <p>3</p>
          <p>5.5</p>
          <p>8.5</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">3 - 2</p>
        <div>
          <p>3</p>
          <p>5</p>
          <p>9</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">3 - 3</p>
        <div>
          <p>6</p>
          <p>6</p>
          <p>11</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">4 - 0</p>
        <div>
          <p>3</p>
          <p>7</p>
          <p>10</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">4 - 1</p>
        <div>
          <p>3</p>
          <p>6</p>
          <p>10</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">4 - 2</p>
        <div>
          <p>3</p>
          <p>5.5</p>
          <p>10.5</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">4 - 3</p>
        <div>
          <p>3</p>
          <p>5</p>
          <p>11</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">4 - 4</p>
        <div>
          <p>6</p>
          <p>6</p>
          <p>13</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">5 - 0</p>
        <div>
          <p>3</p>
          <p>8</p>
          <p>12</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">5 - 1</p>
        <div>
          <p>3</p>
          <p>7</p>
          <p>12</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">5 - 2</p>
        <div>
          <p>3</p>
          <p>6</p>
          <p>12</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">5 - 3</p>
        <div>
          <p>3</p>
          <p>5.5</p>
          <p>12.5</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">5 - 4</p>
        <div>
          <p>3</p>
          <p>5</p>
          <p>13</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">6 - 0</p>
        <div>
          <p>3</p>
          <p>9</p>
          <p>14</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">6 - 1</p>
        <div>
          <p>3</p>
          <p>8</p>
          <p>14</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">7 - 0</p>
        <div>
          <p>3</p>
          <p>10</p>
          <p>16</p>
        </div>
      </div>
      <div class="punktacja">
      <p class="przykladowy-wynik">7 - 1</p>
      <div>
        <p>3</p>
        <p>9</p>
        <p>16</p>
      </div>
    </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">8 - 0</p>
        <div>
          <p>3</p>
          <p>11</p>
          <p>18</p>
        </div>
      </div>
      <div class="punktacja">
        <p class="przykladowy-wynik">8 - 1</p>
        <div>
          <p>3</p>
          <p>10</p>
          <p>18</p>
        </div>
      </div>
    </div>

    <footer>
      <p>copyright by śpiex, <script>document.write(new Date().getFullYear())</script></p>
      <p>marcin.spiewakowski@gmail.com</p>
    </footer>

  <script src="script/punktacja.js"></script>
  <script>
     function makeApiCall() {
       var params = {
         spreadsheetId: '1cK-0glAn4xyDOE1CQLhzy0Mx_8l0wFH-KW06rTKLg_E',
         range: "points",
       };

      // custom functions
       function print(message, location) {
         let div = document.querySelector(location);
         div.innerHTML = message;
       }

              function checkActive(array) {
         let buttons = document.querySelectorAll("button");
         let typy = [];

         for (i=0; buttons.length; i++) {
           if (buttons[i].classList.contains('active')) {
             identifier = [i]*3;
             console.log(array[i]);
             console.log(identifier);
             for (g=0; array.length; g++) {
               typy +=
                 `<div class="punktacja">
                   <p class="przykladowy-wynik">${array[g][1]}</p>
                   <div>
                     <p>${array[g][1+identifier]}</p>
                     <p>${array[g][2+identifier]}</p>
                     <p>${array[g][3+identifier]}</p>
                   </div>
                 </div>`
               }
             console.log(typy);
             // console.log(buttons[i].getAttribute('id'));
           }
         }
       }

       const button1 = document.querySelector("#punktacja-1");
       const button2 = document.querySelector("#punktacja-2");
       const button3 = document.querySelector("#punktacja-3");

       button1.addEventListener('click',()=>{
         button1.classList.add('active');
         button2.classList.remove('active');
         button3.classList.remove('active');
         checkActive(array);
       });

       button2.addEventListener('click',()=>{
         button2.classList.add('active');
         button1.classList.remove('active');
         button3.classList.remove('active');
         checkActive(array);
       });

       button3.addEventListener('click',()=>{
         button3.classList.add('active');
         button2.classList.remove('active');
         button1.classList.remove('active');
         checkActive(array);
       });
       // end of custom

       var request = gapi.client.sheets.spreadsheets.values.get(params);
       request.then(function(response) {
         console.log(response.result);
         checkActive(response.result);
       }, function(reason) {
         console.error('error: ' + reason.result.error.message);
       });
     }

     function initClient() {
       var API_KEY = 'AIzaSyDteHMNEiCdA0XHbEPUM3plvjQzRw-rVVU';
       var CLIENT_ID = '896208609852-0d4hqobmliea0uq34uoho0lekhs2tch4.apps.googleusercontent.com';
       var SCOPE = 'https://www.googleapis.com/auth/spreadsheets.readonly';

       gapi.client.init({
         'apiKey': API_KEY,
         'clientId': CLIENT_ID,
         'scope': SCOPE,
         'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
       }).then(function() {
         gapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus);
         updateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
       });
     }

     function handleClientLoad() {gapi.load('client:auth2', initClient);}
     function updateSignInStatus(isSignedIn) {
         makeApiCall();
     }
   </script>
   <script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>

  </body>
</html>
